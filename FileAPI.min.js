/**!
 * FileAPI â€” a set of tools for working with files
 *
 * @author  RubaXa  <trash@rubaxa.org>
 * @build	lib/canvas-to-blob lib/FileAPI.html lib/FileAPI.Image lib/FileAPI.Form lib/FileAPI.XHR lib/FileAPI.Flash
 */
(function(a){var k=a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype,g=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder,i=g&&a.atob&&a.ArrayBuffer&&a.Uint8Array&&function(a){var c,e,i,q;c=0<=a.split(",")[0].indexOf("base64")?atob(a.split(",")[1]):decodeURIComponent(a.split(",")[1]);e=new ArrayBuffer(c.length);i=new Uint8Array(e);for(q=0;q<c.length;q+=1)i[q]=c.charCodeAt(q);c=new g;c.append(e);a=a.split(",")[0].split(":")[1].split(";")[0];return c.getBlob(a)};a.HTMLCanvasElement&&!k.toBlob&&(k.mozGetAsFile?
k.toBlob=function(a,c){a(this.mozGetAsFile("blob",c))}:k.toDataURL&&i&&(k.toBlob=function(a,c){a(i(this.toDataURL(c)))}));"undefined"!==typeof define&&define.amd?define(function(){return i}):a.dataURLtoBlob=i})(this);
(function(a,k){function g(d,b,a){if(d){var n=h.uid(d);u[n]||(u[n]={});h.each(b.split(/\s+/),function(b){u[n][b]||(u[n][b]=[]);u[n][b].push(a);d.addEventListener?d.addEventListener(b,a,!1):d.attachEvent?d.attachEvent("on"+b,a):d["on"+b]=a})}}function i(d,b,a){if(d){var n=h.uid(d),f=u[n]||{};h.each(b.split(/\s+/),function(b){for(var A=f[b]||[],n=A.length;n--;)if(A[n]===a){A.splice(n,1);break}d.addEventListener?d.removeEventListener(b,a,!1):d.detachEvent?d.detachEvent("on"+b,a):d["on"+b]=null})}}function p(d,
b,a){g(d,b,function D(f){a(f);i(d,b,D)})}function c(d,b,a,n,f){d={type:a.type||a,target:d,result:n};h.extend(d,f);b(d)}function e(d,b,a){if(l){var n=new l;g(n,"abort progress error load loadend",function B(a){var f=a.type;"progress"==f?c(d,b,a,a.target.result,{loaded:a.loaded,total:a.total}):"loadend"==f?(i(n,"abort progress error load loadend",B),n=null):c(d,b,a,a.target.result)});try{n["readAs"+a](d)}catch(f){c(d,b,"error",k,{error:f.toString()})}}else c(d,b,"error",k,{error:"FileReader is not supported"})}
function t(d){return"object"==typeof d&&"length"in d}var q=1,j=a.createObjectURL&&a||a.URL&&URL.revokeObjectURL&&URL||a.webkitURL&&webkitURL,w=a.File,l=a.FileReader,v=a.FormData,o=!(!w||!(l&&a.Uint8Array||v)),z=a.document,r=a.dataURLtoBlob,m={},b=/img/i,f=/canvas/i,s=/img|canvas/,x=/input/i,G=/^data:[^,]+,/,v=Math.pow,u={},C=[],h={build:1,KB:1024,MB:v(1024,2),GB:v(1024,3),TB:v(1024,4),expando:"fileapi"+(new Date).getTime(),uid:function(d){return d?d[h.expando]=d[h.expando]||h.uid():h.expando+ ++q},
log:function(){a.console&&console.log&&(console.log.apply?console.log.apply(console,arguments):console.log([].join.call(arguments," ")))},getXHR:function(){var d;if(a.XMLHttpRequest)d=new XMLHttpRequest;else if(a.ActiveXObject)try{d=new ActiveXObject("MSXML2.XMLHttp.3.0")}catch(b){}return d},isArray:t,support:{html5:o},event:{on:g,off:i,one:p,fix:function(d){d.target||(d.target=a.event&&a.event.srcElement||z);3===d.target.nodeType&&(d.target=event.target.parentNode);return d}},throttle:function(d,
b){var f,n,c;return function B(){n=arguments;c=!0;f||(c?(d.apply(a,n),c=!1,f=setTimeout(B,b)):f=null)}},F:function(d){return d},parseJSON:function(d){return a.JSON&&JSON.parse?JSON.parse(d):(new Function("return "+d+";"))()},trim:function(d){d=String(d);return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")},queue:function(d){var b=0,a=0,n=!1,f=!1,c={inc:function(){a++},next:function(){b++;setTimeout(c.check,0)},check:function(){b>=a&&!n&&c.end()},isFail:function(){return n},fail:function(){!n&&d(n=!0)},
end:function(){f||(f=!0,d())}};return c},each:function(d,b,a){if(d)if(d.forEach)d.forEach(b,a);else if(t(d))for(var n=0,f=d.length;n<f;n++)n in d&&b.call(a,d[n],n,d);else for(n in d)d.hasOwnProperty(n)&&b.call(a,d[n],n,d)},extend:function(d){h.each(arguments,function(b){h.each(b,function(b,a){d[a]=b})});return d},isFile:function(d){return o&&d&&d instanceof w},isCanvas:function(d){return d&&f.test(d.nodeName)},getFilesFilter:function(d){return(d="string"==typeof d?d:d.getAttribute&&d.getAttribute("accept")||
"")?RegExp("("+d.replace(/\./g,"\\.").replace(/,/g,"|")+")$","i"):/./},readAsDataURL:function(d,b){h.isFile(d)?e(d,b,"DataURL"):h.isCanvas(d)?c(d,b,"load",h.toDataURL(d)):c(d,b,"error")},readAsBinaryString:function(d,b){h.isFile(d)?e(d,b,"BinaryString"):c(d,b,"error")},toDataURL:function(d){if("string"==typeof d)return d;if(d.toDataURL)return d.toDataURL("image/png")},toBinaryString:function(d){return a.atob(h.toDataURL(d).replace(G,""))},readAsImage:function(d,a,f){if(h.isFile(d))if(j){var n=j.createObjectURL(d);
n===k?c(d,a,"error"):h.readAsImage(n,a,f)}else h.readAsDataURL(d,function(b){"load"==b.type?h.readAsImage(b.result,a,f):(f||"error"==b.type)&&c(d,a,b,null,{loaded:b.loaded,total:b.total})});else h.isCanvas(d)?c(d,a,"load",d):b.test(d.nodeName)?d.complete?c(d,a,"load",d):p(d,"error abort load",function y(b){"load"==b.type&&j&&j.revokeObjectURL(d.src);i(d,"error abort load",y);c(d,a,b,d)}):d.iframe?c(d,a,{type:"error"}):(n=new Image,n.src=d.dataURL||d,h.readAsImage(n,a,f))},checkFileObj:function(d){var b=
{};"object"==typeof d?b=d:b.name=(d+"").split(/(\\|\/)/g).pop();b.type===k&&(b.type=b.name.split(".").pop());h.each(m,function(d,a){if(d.test(b.type))b.type=a+"/"+b.type});return b},getFiles:function(d,b,a){var f=[];if(a)return h.filterFiles(h.getFiles(d),b,a),null;"string"==typeof b&&(b=h.getFilesFilter(b));d.originalEvent&&(d=d.originalEvent);d.dataTransfer?d=d.dataTransfer:d.target&&(d=d.target);d.files?f=d.files:!o&&x.test(d&&d.tagName)?h.trim(d.value)&&(f=[h.checkFileObj(d.value)],f[0].blob=
d,f[0].iframe=!0):t(d)&&(f=d);!b&&x.test(d&&d.tagName)&&(b=h.getFilesFilter(d));return h.filter(f,function(d){return!b||b.test(d.name)})},getInfo:function(d,b){var a={},f=C.concat();h.isFile(d)?function y(){var c=f.shift();c?c.test(d.type)?c(d,function(d,f){d?b(d):(h.extend(a,f),y())}):y():b(!1,a)}():b("not_support",a)},addInfoReader:function(d,b){b.test=function(b){return d.test(b)};C.push(b)},addMime:function(d,b){m[d]=RegExp("("+b.replace(/,/g,"|")+")$","i")},filter:function(d,b){for(var a=[],
f=0,c=d.length,e;f<c;f++)f in d&&(e=d[f],b.call(e,e,f,d)&&a.push(e));return a},filterFiles:function(d,b,a){if(d&&(o||d[0].id)){var f=d.concat(),c,e=[],j=[];(function F(){f.length?(c=f.shift(),h.getInfo(c,function(d,a){(b(c,d?a:!1)?e:j).push(c);F()})):a(e,j)})()}else a(d,[])},upload:function(d){var d=h.extend({beforeupload:h.F,upload:h.F,fileupload:h.F,fileprogress:h.F,filecomplete:h.F,progress:h.F,complete:h.F},d),b=new h.XHR(d),a=this._getFilesDataArray(d.files),f=0,c=0,e=0;h.each(a,function(d){f+=
d.size});d.total=f;d.loaded=c;d.beforeupload(b,d);(function E(){var j=a.shift(),q=this;"abort"!=b.statusText&&j?this._getFormData(d,j,function(a){c||d.upload(b,d);var s=new h.XHR(h.extend({},d,{upload:function(){d.fileupload(s,d)},progress:function(b){b.lengthComputable&&(e=c+=~~(f*j.part*(b.loaded/b.total)-e+0.5),d.fileprogress(b,s),d.progress({type:b.type,total:f,loaded:d.loaded=c,lengthComputable:!0}))},complete:function(a){h.extend(b,s);d.loaded=c+=c-e+~~(f*j.part+0.5);d.filecomplete(a,s);E.call(q)}}));
j.part=j.size/f;s.send(a);b.abort=function(){s.abort()}}):d.complete(200==b.status?!1:b.statusText||"error",b)}).call(this);return b},_getFilesDataArray:function(d){var b=[];h.each(d,function n(d,a){t(d)?h.each(d,function(d,b){n(d,a+"["+b+"]")}):b.push({name:a,file:d,size:d.size})});return b},_getFormData:function(d,b,a){var f=b.file,c=b.name,e=f.name,j=f.type,q=(b=h.support.transform&&d.imageTransform)&&"number"==typeof(b.maxWidth||b.minWidth||b.width),l=new h.Form,m=h.queue(function(){a(l)});b&&
(/image/.test(f.type)||s.test(f.nodeType))?(m.inc(),q&&(b=[b]),h.Image.transform(f,b,function(b,a){q&&!b?(!r&&!h.flashEngine&&(a[0]=h.toBinaryString(a[0]),l.multipart=!0),l.append(c,a[0],e,j)):(b||(h.each(a,function(b,d){!r&&!h.flashEngine&&(b=h.toBinaryString(b),l.multipart=!0);l.append(c+"["+d+"]",b,e,j)}),c+="[original]"),(b||d.imageOriginal)&&l.append(c,f,e,j));m.next()})):l.append(c,f,e);h.each(d.data,function H(b,d){typeof b=="object"?h.each(b,function(b,a){H(b,d+"["+a+"]")}):l.append(d,b)});
m.check()},reset:function(b){var f,c;a.jQuery?(c=jQuery(b).clone(!0).insertBefore(b).val("")[0],jQuery(b).remove()):(f=b.parentNode,c=f.insertBefore(b.cloneNode(!0),b),c.value="",f.removeChild(b));h.each(u[h.uid(b)],function(a,f){h.each(a,function(a){i(b,f,a);g(c,f,a)})});return c},load:function(b,a){var f=h.getXHR();f?(f.open("GET",b,!0),f.overrideMimeType&&f.overrideMimeType("text/plain; charset=x-user-defined"),g(f,"progress",function(b){b.lengthComputable&&a({type:b.type,loaded:b.loaded,total:b.total},
f)}),f.onreadystatechange=function(){if(4==f.readyState)if(f.onreadystatechange=null,200==f.status){b=b.split("/");var c={name:b[b.length-1],size:f.getResponseHeader("Content-Length"),type:f.getResponseHeader("Content-Type")};c.dataURL="data:"+c.type+";base64,"+h.encode64(f.responseBody||f.responseText);a({type:"load",result:c})}else a({type:"error"})},f.send(null)):a({type:"error"});return f},encode64:function(b){var a="",f=0;for("string"!==typeof b&&(b=String(b));f<b.length;){var c=b.charCodeAt(f++)&
255,e=b.charCodeAt(f++)&255,j=b.charCodeAt(f++)&255,q=c>>2,c=(c&3)<<4|e>>4;isNaN(e)?e=j=64:(e=(e&15)<<2|j>>6,j=isNaN(j)?64:j&63);a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(q)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(j)}return a}};h.each({image:"png,jpg,jpeg,bmp,gif,ico,tif,tiff,tga,pcx,cbz,cbr",
audio:"m4a,flac,aac,rm,mpa,wav,wma,ogg,mp3,mp2,m3u,mod,amf,dmf,dsm,far,gdm,imf,it,m15,med,okt,s3m,stm,sfx,ult,uni,xm,sid,ac3,dts,cue,aif,aiff,wpl,ape,mac,mpc,mpp,shn,wv,nsf,spc,gym,adplug,adx,dsp,adp,ymf,ast,afc,hps,xsp",video:"m4v,3gp,nsv,ts,ty,strm,rm,rmvb,m3u,ifo,mov,qt,divx,xvid,bivx,vob,nrg,img,iso,pva,wmv,asf,asx,ogm,m2v,avi,bin,dat,dvr-ms,mpg,mpeg,mp4,mkv,avc,vp3,svq3,nuv,viv,dv,fli,flv,wpl"},function(b,a){h.addMime(a,b)});h.addInfoReader(/image/,function(b,a){h.readAsImage(b,function(b){var d=
b.target;a("load"==b.type?!1:"error",{width:d.width,height:d.height})})});a.FileAPI=h})(this);
(function(a,k,g){function i(a,c){if(!(this instanceof i))return new i(a);this.data=a;this.better=!c;this.matrix={sx:0,sy:0,sw:0,sh:0,dx:0,dy:0,dw:0,dh:0,resize:0,deg:0}}var p=Math.min,c=Math.round,e=!1;try{e=-1<k.createElement("canvas").toDataURL("image/png").indexOf("data:image/png")}catch(t){}i.prototype={constructor:i,set:function(c){a.extend(this.matrix,c);return this},crop:function(a,c,e,l){e===g&&(e=a,l=c,a=c=0);return this.set({sx:a,sy:c,sw:e,sh:l||e})},resize:function(a,c,e){"string"==typeof c&&
(e=c,c=a);return this.set({dw:a,dh:c,resize:e})},preview:function(a,c){return this.set({dw:a,dh:c||a,resize:"preview"})},rotate:function(a){return this.set({deg:a})},_load:function(c,e){var i=this;a.readAsImage(c,function(a){e.call(i,"load"!=a.type,a.result)})},_apply:function(a,c){var e=k.createElement("canvas"),l=this.getMatrix(a),i=e.getContext("2d"),o=l.deg,p=l.dw,r=l.dh,m=a.width,b=a.height,f,s=a;if(this.better)for(;2<Math.min(m/p,b/r);)m=~~(m/2+0.5),b=~~(b/2+0.5),f=k.createElement("canvas"),
f.width=m,f.height=b,s!==a?(f.getContext("2d").drawImage(s,0,0,s.width,s.height,0,0,m,b),s=f):(s=f,s.getContext("2d").drawImage(a,l.sx,l.sy,l.sw,l.sh,0,0,m,b),l.sx=l.sy=l.sw=l.sh=0);e.width=!(o%180)?p:r;e.height=o%180?p:r;i.rotate(o*Math.PI/180);i.drawImage(s,l.sx,l.sy,l.sw||s.width,l.sh||s.height,180==o||270==o?-p:0,90==o||180==o?-r:0,p,r);c.call(this,!1,e)},getMatrix:function(e){var j=a.extend({},this.matrix),i=j.sw=j.sw||e.width,e=j.sh=j.sh||e.height,l=j.dw=j.dw||j.sw,k=j.dh=j.dh||j.sh,o=i/e,g=
l/k,r=j.resize;if("preview"==r){if(l!=i||k!=e)if(g>=o?(o=i,r=o/g):(r=e,o=r*g),o!=i||r!=e)j.sx=~~((i-o)/2),j.sy=~~((e-r)/2),i=o,e=r}else r&&("min"==r?(l=c(o<g?p(i,l):k*o),k=c(o<g?l/o:p(e,k))):(l=c(o>=g?p(i,l):k*o),k=c(o>=g?l/o:p(e,k))));j.sw=i;j.sh=e;j.dw=l;j.dh=k;return j},get:function(c){a.support.transform?this._load(this.data,function(a,e){a?c(a):this._apply(e,c)}):c("not_support")},toData:function(a){this.get(a)}};i.transform=function(c,e,k){a.getInfo(c,function(l,g){var p={},t=a.queue(function(a){k(a,
p)});l?t.fail():a.each(e,function(a,e){if(!t.isFail()){var b=i(g.nodeType?g:c);if("function"==typeof a)a(g,b);else if(a.width)b[a.preview?"preview":"resize"](a.width,a.height,a.type);else a.maxWidth&&(g.width>a.maxWidth||g.height>a.maxHeight)&&b.resize(a.maxWidth,a.maxHeight,"max"),b.rotate(~~a.rotate);t.inc();b.toData(function(b,a){b?t.fail():(p[e]=a,t.next())})}})})};a.support.canvas=a.support.transform=e;a.Image=i})(FileAPI,document);
(function(a,k,g){var i=k.encodeURIComponent,p=k.FormData,k=function(){this.items=[]};k.prototype={append:function(a,e,i,g){this.items.push({name:a,blob:e&&e.blob||e,file:i||e.name,type:g||e.type})},each:function(a){for(var e=0,i=this.items.length;e<i;e++)a.call(this,this.items[e])},toData:function(c){a.support.html5?this.multipart?(a.log("FileAPI.Form.toMultipartData"),this.toMultipartData(c)):(a.log("FileAPI.Form.toFormData"),this.toFormData(c)):(a.log("tFileAPI.Form.toHtmlData"),this.toHtmlData(c))},
_to:function(c,e,i,g){var j=a.queue(function(){e(c)});this.each(function(a){i(a,c,j,g)});j.check()},toHtmlData:function(c){this._to(g.createDocumentFragment(),c,function(c,i){var k=c.blob,j;c.file?(a.reset(k),i.appendChild(k)):(j=g.createElement("input"),j.type="hidden",j.value=k,i.appendChild(j))})},toFormData:function(a){this._to(new p,a,function(a,c,i){a.file&&c.append("_"+a.name,a.file);a.blob.toBlob?(i.inc(),a.blob.toBlob(function(j){c.append(a.name,j,a.file);i.next()},"image/png")):a.file?c.append(a.name,
a.blob,a.file):c.append(a.name,a.blob)})},toMultipartData:function(c){this._to([],c,function(a,c,g,j){c.push("--_"+j+('\r\nContent-Disposition: form-data; name="'+a.name+'"'+(a.file?'; filename="'+i(a.file)+'"':"")+(a.file?"\r\nContent-Type: "+(a.type||"application/octet-stream"):"")+"\r\n\r\n"+(a.file?a.blob:i(a.blob))+"\r\n"))},a.expando)}};a.Form=k})(FileAPI,this,document);
(function(a){var k=function(){},g=function(i){this.uid=a.uid();this.xhr={abort:k,getResponseHeader:k,getAllResponseHeaders:k};this.options=i};g.prototype={status:0,statusText:"",getResponseHeader:function(a){return this.xhr.getResponseHeader(a)},getAllResponseHeaders:function(){return this.xhr.getAllResponseHeaders()||{}},end:function(a,g){var c=this,e=c.options;c.abort=k;c.status=a;g&&(c.statusText=g);e.complete(200==a?!1:c.statusText||"unknown",c);c.xhr&&c.xhr.node&&setTimeout(function(){try{c.xhr.node.parentNode.removeChild(c.xhr.node)}catch(a){}c.xhr.node=
null;delete window[c.uid]},1)},abort:function(){this.end(0,"abort");this.xhr&&this.xhr.abort()},send:function(a){var g=this,c=this.options;a.toData(function(a){c.upload(c,g);g._send.call(g,c,a)})},_send:function(i,g){var c=this,e,k=c.uid;a.log("XHR._send:",g);if(g.nodeName){i.upload(i,c);e=document.createElement("div");e.innerHTML='<form target="'+k+'" action="'+i.url+'" method="POST" enctype="multipart/form-data" style="position: absolute; top: -1000px; overflow: hidden; width: 1px; height: 1px;"><iframe name="'+
k+'" src="javascript:false;"></iframe><input value="'+k+'" name="callback" type="hidden"/></form>';c.xhr.abort=function(){var a=e.getElementsByName("iframe")[0];if(a)try{a.stop?a.stop():a.contentWindow.stop?a.contentWindow.stop():a.contentWindow.document.execCommand("Stop")}catch(c){}};var q=e.getElementsByTagName("form")[0];q.appendChild(g);document.body.appendChild(e);this.xhr.node=e;window[k]=function(a,e,g){c.readyState=4;c.responseText=g;c.end(a,e)};c.readyState=2;q.submit();q=null}else{e=c.xhr=
a.getXHR();e.open("POST",i.url,!0);e.withCredential="true";a.each(i.headers,function(a,c){e.setRequestHeader(c,a)});if(e.upload)a.event.on(e.upload,"progress",a.throttle(function(a){i.progress(a,i,c)},100));e.onreadystatechange=function(){c.status=e.status;c.statusText=e.statusText;c.readyState=e.readyState;if(4==e.readyState){for(var a in{"":1,XML:1,Text:1,Body:1})c["response"+a]=e["response"+a];e.onreadystatechange=null;c.end(e.status)}};a.isArray(g)?(e.setRequestHeader("Content-Type","multipart/form-data; boundary=_"+
a.expando),g=g.join("")+"--_"+a.expando+"--",e.sendAsBinary?e.sendAsBinary(g):(k=Array.prototype.map.call(g,function(a){return a.charCodeAt(0)&255}),e.send((new Uint8Array(k)).buffer))):e.send(g)}}};a.XHR=g})(FileAPI);
(function(a,k,g){var i=a.support,p=k.navigator,c=p.mimeTypes,e=!1;if(p.plugins&&"object"==typeof p.plugins["Shockwave Flash"])e=p.plugins["Shockwave Flash"].description&&!(c&&c["application/x-shockwave-flash"]&&!c["application/x-shockwave-flash"].enabledPlugin);else try{e=!(!k.ActiveXObject||!new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){}i.flash=e;if(!a.support.html5&&a.support.flash){var q=function(a,f){if(a&&a.style){var c,e;for(c in f){e=f[c];"number"==typeof e&&(e+="px");try{a.style[c]=
e}catch(g){}}}},j=function(b,f){a.each(f,function(a,f){var c=b[f];b[f]=function(){this.parent=c;return a.apply(this,arguments)}})},w=function(b){var f=b.wid=a.uid();m._fn[f]=b;return"FileAPI.Flash._fn."+f},l=function(a){delete m._fn[a.wid]},v=function(a){var f=g.createElement("a");f.href=a;return f.href},o=a.expando,z=0,r={},m={_fn:{},init:function(){var b=g.body&&g.body.firstChild;if(b){do if(1==b.nodeType){a.log("FlashAPI.Flash.inited");var f=g.createElement("div");q(f,{top:1,left:1,width:5,height:5,
position:"absolute"});b.parentNode.insertBefore(f,b);m.pingUrl=m.pingUrl||location.protocol+"//"+location.host;m.publish(f,a.expando);return}while(b=b.nextSibling)}10>z&&setTimeout(m.init,50*++z)},publish:function(b,f){var c={id:f,src:"./FileAPI.flash.swf?r="+a.build,flashVars:"callback=FileAPI.Flash.event&flashId="+f+"&storeKey="+navigator.userAgent.match(/\d/ig).join("")+"_"+a.build+(m.isReady||!m.pingUrl?"":"&ping="+m.pingUrl)};b.innerHTML='<object id="#id#" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="#src#" /><param name="flashvars" value="#flashVars#" /><param name="swliveconnect" value="true" /><param name="allowscriptaccess" value="always" /><param name="allownetworking" value="all" /><param name="wmode" value="transparent" /><param name="menu" value="false" /><embed flashvars="#flashVars#" swliveconnect="true" allownetworking="all" allowscriptaccess="always" name="#id#" src="#src#"  width="100%" height="100%" menu="false" wmode="transparent" type="application/x-shockwave-flash"></embed></object>'.replace(/#(\w+)#/ig,
function(a,b){return c[b]})},ready:function(){m.ready=a.F;m.isReady=!0;m.patch();a.event.on(g,"mouseover",m.mouseover);a.event.on(g,"click",function(a){m.mouseover(a)&&(a.preventDefault?a.preventDefault():a.returnValue=!0)})},mouseover:function(b){b=a.event.fix(b).target;if(/input/i.test(b.nodeName)&&"file"==b.type){if("y"!=b.getAttribute(o)){b.setAttribute(o,"y");var f=b.offsetTop,c=b.offsetLeft,e=g.createElement("div");k.getComputedStyle&&(c=getComputedStyle(b,null),f=parseInt(c.top,10)+parseInt(c.marginTop,
10),c=parseInt(c.left,10)+parseInt(c.marginLeft,10));q(e,{top:f,left:c,width:b.offsetWidth,height:b.offsetHeight,position:"absolute"});b.parentNode.appendChild(e);m.publish(e,a.uid())}return!0}},event:function(b){var c=b.type;if("ready"==c)return a.log("Flash.event."+b.type+":",b),m.ready(),setTimeout(function(){m.mouseenter(b)},50),!0;"ping"===c?a.log("(flash -> js).ping:",[b.status,b.savedStatus],b.error):"log"===c?a.log("(flash -> js).log:",b.target):c in m&&setTimeout(function(){a.log("Flash.event."+
b.type+":",b);m[c](b)},1)},mouseenter:function(a){var c=m.getInput(a.flashId);c&&(m.cmd(a,"multiple",null!==c.getAttribute("multiple")),m.cmd(a,"accept",(c.getAttribute("accept")||"*").replace(/\./g,"")))},get:function(a){return g[a]||k[a]||g.embeds[a]},getInput:function(a){a=m.get(a);/embed/i.test(a.nodeName)&&(a=a.parentNode);return a.parentNode.parentNode.getElementsByTagName("input")[0]},select:function(b){var c=m.getInput(b.flashId),e=a.uid(c),b=b.target.files;a.each(b,function(b){a.checkFileObj(b)});
r[e]=b;g.createEvent?(e=g.createEvent("Event"),e.initEvent("change",!0,!1),c.dispatchEvent(e)):g.createEventObject&&(e=g.createEventObject(),c.fireEvent("onchange",e))},cmd:function(b,c,e,g){try{return a.log("(js -> flash)."+c+":",e),m.get(b.flashId||b).cmd(c,e)}catch(i){a.log("(js -> flash).onError:",i),g||setTimeout(function(){m.cmd(b,c,e,!0)},50)}},patch:function(){a.flashEngine=a.support.transform=!0;j(a,{getFiles:function(b,c,e){if(e)return a.filterFiles(a.getFiles(b),c,e),null;var g=a.isArray(b)?
b:r[a.uid(b.target||b.srcElement||b)];if(!g)return this.parent.apply(this,arguments);c&&(c=a.getFilesFilter(c),g=a.filter(g,function(a){return c.test(a.name)}));return g},getInfo:function(a,c){a&&!a.flashId?this.parent.apply(this,arguments):a.info?c(!1,a.info):m.cmd(a,"getFileInfo",{id:a.id,callback:w(function x(e,g){l(x);c(e,a.info=g)})})}});a.support.transform=!0;j(FileAPI.Image.prototype,{_load:function(b,c){if(b&&!b.flashId)this.parent.apply(this,arguments);else{a.log("_load:",b);var e=this;a.getInfo(b,
function(a){c.call(e,a,b)})}},_apply:function(b,c){b&&!b.flashId?this.parent.apply(this,arguments):(a.log("_apply:",b),m.cmd(b,"imageTransform",{id:b.id,matrix:this.getMatrix(b.info),callback:w(function x(a,e){l(x);if(a)c(a);else{var g=new Image;g.src="data:"+b.type+";base64,"+e;c(!1,g)}})}))},toData:function(a){var c=this.data;c&&!c.flashId?this.parent.apply(this,arguments):a.call(this,!c.info,{id:c.id,name:c.name,type:c.type,flashId:c.flashId,matrix:this.getMatrix(c.info)})}});j(a.Form.prototype,
{toData:function(b){for(var c=this.items,e=c.length;e--;)if(c[e].file&&c[e].blob&&!c[e].blob.flashId)return this.parent.apply(this,arguments);a.log("flash.Form.toData");b(c)}});j(a.XHR.prototype,{_send:function(b,c){if(c.nodeName||c.append&&a.support.html5||a.isArray(c)&&"string"===typeof c[0])return this.parent.apply(this,arguments);var e={},g={},i=this,j,k;a.each(c,function(a){a.file?(g[a.name]=a=a.blob,k=a.id,j=a.flashId):e[a.name]=a.blob});a.log("flash.XHR._send:",j,k,g);this.xhr={headers:{},
abort:function(){m.cmd(j,"abort",k)},getResponseHeader:function(a){return this.headers[a]},getAllResponseHeaders:function(){return this.headers}};m.cmd(j,"upload",{url:v(b.url),data:e,files:g,headers:b.headers,callback:w(function d(c){var e=c.type,f=c.result;a.log("flash.upload."+e+":",c);if("progress"==e)c.lengthComputable=!0,b.progress(c);else if("complete"==e)l(d),"string"==typeof f&&(i.responseText=f.replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")),i.end(c.status);
else if("abort"==e||"error"==e)this.end(0,c.message),l(d)})})}})}};a.Flash=m;m.init()}})(FileAPI,this,document);window.ajs&&ajs.loaded&&ajs.loaded("{FileAPI}FileAPI.min");"function"===typeof define&&define.amd&&define("FileAPI",[],function(){return window.FileAPI||{}});